2025-08-07 14:55:33,850 - __main__ - INFO - Setting up MCP integration...
2025-08-07 14:55:33,850 - __main__ - INFO - MCP imports loaded successfully
2025-08-07 14:55:33,851 - asyncio - DEBUG - Using selector: EpollSelector
2025-08-07 14:55:33,851 - __main__ - INFO - Initializing SchedulingChatbot with MCP...
2025-08-07 14:55:33,856 - __main__ - INFO - MCP client initialized with scheduler and mem0 servers
2025-08-07 14:55:33,856 - __main__ - INFO - Using model: gpt-4o
2025-08-07 14:55:34,808 - __main__ - INFO - Getting tools from MCP servers...
2025-08-07 14:55:34,835 - __main__ - ERROR - Failed to initialize MCP tools: unhandled errors in a TaskGroup (1 sub-exception)
  + Exception Group Traceback (most recent call last):
  |   File "/mnt/c/Users/ran/Desktop/new_canlah/schedular/core/langgraph_scheduler.py", line 82, in initialize
  |     self.tools = await self.client.get_tools()
  |                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  |   File "/home/ran/miniconda3/lib/python3.12/site-packages/langchain_mcp_adapters/client.py", line 142, in get_tools
  |     tools_list = await asyncio.gather(*load_mcp_tool_tasks)
  |                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  |   File "/home/ran/miniconda3/lib/python3.12/site-packages/langchain_mcp_adapters/tools.py", line 168, in load_mcp_tools
  |     async with create_session(connection) as tool_session:
  |   File "/home/ran/miniconda3/lib/python3.12/contextlib.py", line 231, in __aexit__
  |     await self.gen.athrow(value)
  |   File "/home/ran/miniconda3/lib/python3.12/site-packages/langchain_mcp_adapters/sessions.py", line 394, in create_session
  |     async with _create_stdio_session(**params) as session:
  |   File "/home/ran/miniconda3/lib/python3.12/contextlib.py", line 231, in __aexit__
  |     await self.gen.athrow(value)
  |   File "/home/ran/miniconda3/lib/python3.12/site-packages/langchain_mcp_adapters/sessions.py", line 220, in _create_stdio_session
  |     async with (
  |   File "/home/ran/miniconda3/lib/python3.12/contextlib.py", line 231, in __aexit__
  |     await self.gen.athrow(value)
  |   File "/home/ran/miniconda3/lib/python3.12/site-packages/mcp/client/stdio/__init__.py", line 180, in stdio_client
  |     async with (
  |   File "/home/ran/miniconda3/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 772, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Exception Group Traceback (most recent call last):
    |   File "/home/ran/miniconda3/lib/python3.12/site-packages/mcp/client/stdio/__init__.py", line 187, in stdio_client
    |     yield read_stream, write_stream
    |   File "/home/ran/miniconda3/lib/python3.12/site-packages/langchain_mcp_adapters/sessions.py", line 220, in _create_stdio_session
    |     async with (
    |   File "/home/ran/miniconda3/lib/python3.12/site-packages/mcp/shared/session.py", line 218, in __aexit__
    |     return await self._task_group.__aexit__(exc_type, exc_val, exc_tb)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/home/ran/miniconda3/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 772, in __aexit__
    |     raise BaseExceptionGroup(
    | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
    +-+---------------- 1 ----------------
      | Traceback (most recent call last):
      |   File "/home/ran/miniconda3/lib/python3.12/site-packages/langchain_mcp_adapters/sessions.py", line 224, in _create_stdio_session
      |     yield session
      |   File "/home/ran/miniconda3/lib/python3.12/site-packages/langchain_mcp_adapters/sessions.py", line 395, in create_session
      |     yield session
      |   File "/home/ran/miniconda3/lib/python3.12/site-packages/langchain_mcp_adapters/tools.py", line 169, in load_mcp_tools
      |     await tool_session.initialize()
      |   File "/home/ran/miniconda3/lib/python3.12/site-packages/mcp/client/session.py", line 151, in initialize
      |     result = await self.send_request(
      |              ^^^^^^^^^^^^^^^^^^^^^^^^
      |   File "/home/ran/miniconda3/lib/python3.12/site-packages/mcp/shared/session.py", line 286, in send_request
      |     raise McpError(response_or_error.error)
      | mcp.shared.exceptions.McpError: Connection closed
      +------------------------------------
2025-08-07 14:55:34,838 - __main__ - ERROR - Failed to run chatbot: unhandled errors in a TaskGroup (1 sub-exception)
2025-08-07 14:55:34,839 - asyncio - ERROR - unhandled exception during asyncio.run() shutdown
task: <Task finished name='Task-2' coro=<load_mcp_tools() done, defined at /home/ran/miniconda3/lib/python3.12/site-packages/langchain_mcp_adapters/tools.py:144> exception=UnboundLocalError("cannot access local variable 'tools' where it is not associated with a value")>
Traceback (most recent call last):
  File "/home/ran/miniconda3/lib/python3.12/site-packages/langchain_mcp_adapters/tools.py", line 175, in load_mcp_tools
    convert_mcp_tool_to_langchain_tool(session, tool, connection=connection) for tool in tools
                                                                                         ^^^^^
UnboundLocalError: cannot access local variable 'tools' where it is not associated with a value
2025-08-07 14:58:18,981 - __main__ - INFO - Setting up MCP integration...
2025-08-07 14:58:18,981 - __main__ - INFO - MCP imports loaded successfully
2025-08-07 14:58:18,982 - asyncio - DEBUG - Using selector: EpollSelector
2025-08-07 14:58:18,982 - __main__ - INFO - Initializing SchedulingChatbot with MCP...
2025-08-07 14:58:18,985 - __main__ - INFO - MCP client initialized with scheduler and mem0 servers
2025-08-07 14:58:18,985 - __main__ - INFO - Using model: gpt-4o
2025-08-07 14:58:19,787 - __main__ - INFO - Getting tools from MCP servers...
2025-08-07 14:58:20,251 - __main__ - ERROR - Failed to initialize MCP tools: unhandled errors in a TaskGroup (1 sub-exception)
  + Exception Group Traceback (most recent call last):
  |   File "/mnt/c/Users/ran/Desktop/new_canlah/schedular/core/langgraph_scheduler.py", line 82, in initialize
  |     self.tools = await self.client.get_tools()
  |                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  |   File "/home/ran/miniconda3/lib/python3.12/site-packages/langchain_mcp_adapters/client.py", line 142, in get_tools
  |     tools_list = await asyncio.gather(*load_mcp_tool_tasks)
  |                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  |   File "/home/ran/miniconda3/lib/python3.12/site-packages/langchain_mcp_adapters/tools.py", line 168, in load_mcp_tools
  |     async with create_session(connection) as tool_session:
  |   File "/home/ran/miniconda3/lib/python3.12/contextlib.py", line 231, in __aexit__
  |     await self.gen.athrow(value)
  |   File "/home/ran/miniconda3/lib/python3.12/site-packages/langchain_mcp_adapters/sessions.py", line 394, in create_session
  |     async with _create_stdio_session(**params) as session:
  |   File "/home/ran/miniconda3/lib/python3.12/contextlib.py", line 231, in __aexit__
  |     await self.gen.athrow(value)
  |   File "/home/ran/miniconda3/lib/python3.12/site-packages/langchain_mcp_adapters/sessions.py", line 220, in _create_stdio_session
  |     async with (
  |   File "/home/ran/miniconda3/lib/python3.12/contextlib.py", line 231, in __aexit__
  |     await self.gen.athrow(value)
  |   File "/home/ran/miniconda3/lib/python3.12/site-packages/mcp/client/stdio/__init__.py", line 180, in stdio_client
  |     async with (
  |   File "/home/ran/miniconda3/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 772, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Exception Group Traceback (most recent call last):
    |   File "/home/ran/miniconda3/lib/python3.12/site-packages/mcp/client/stdio/__init__.py", line 187, in stdio_client
    |     yield read_stream, write_stream
    |   File "/home/ran/miniconda3/lib/python3.12/site-packages/langchain_mcp_adapters/sessions.py", line 220, in _create_stdio_session
    |     async with (
    |   File "/home/ran/miniconda3/lib/python3.12/site-packages/mcp/shared/session.py", line 218, in __aexit__
    |     return await self._task_group.__aexit__(exc_type, exc_val, exc_tb)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/home/ran/miniconda3/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 772, in __aexit__
    |     raise BaseExceptionGroup(
    | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
    +-+---------------- 1 ----------------
      | Traceback (most recent call last):
      |   File "/home/ran/miniconda3/lib/python3.12/site-packages/langchain_mcp_adapters/sessions.py", line 224, in _create_stdio_session
      |     yield session
      |   File "/home/ran/miniconda3/lib/python3.12/site-packages/langchain_mcp_adapters/sessions.py", line 395, in create_session
      |     yield session
      |   File "/home/ran/miniconda3/lib/python3.12/site-packages/langchain_mcp_adapters/tools.py", line 169, in load_mcp_tools
      |     await tool_session.initialize()
      |   File "/home/ran/miniconda3/lib/python3.12/site-packages/mcp/client/session.py", line 151, in initialize
      |     result = await self.send_request(
      |              ^^^^^^^^^^^^^^^^^^^^^^^^
      |   File "/home/ran/miniconda3/lib/python3.12/site-packages/mcp/shared/session.py", line 286, in send_request
      |     raise McpError(response_or_error.error)
      | mcp.shared.exceptions.McpError: Connection closed
      +------------------------------------
2025-08-07 14:58:20,255 - __main__ - ERROR - Failed to run chatbot: unhandled errors in a TaskGroup (1 sub-exception)
2025-08-07 14:58:20,256 - asyncio - ERROR - unhandled exception during asyncio.run() shutdown
task: <Task finished name='Task-2' coro=<load_mcp_tools() done, defined at /home/ran/miniconda3/lib/python3.12/site-packages/langchain_mcp_adapters/tools.py:144> exception=UnboundLocalError("cannot access local variable 'tools' where it is not associated with a value")>
Traceback (most recent call last):
  File "/home/ran/miniconda3/lib/python3.12/site-packages/langchain_mcp_adapters/tools.py", line 175, in load_mcp_tools
    convert_mcp_tool_to_langchain_tool(session, tool, connection=connection) for tool in tools
                                                                                         ^^^^^
UnboundLocalError: cannot access local variable 'tools' where it is not associated with a value
2025-08-07 14:58:44,155 - __main__ - INFO - Setting up MCP integration...
2025-08-07 14:58:44,155 - __main__ - INFO - MCP imports loaded successfully
2025-08-07 14:58:44,156 - asyncio - DEBUG - Using selector: EpollSelector
2025-08-07 14:58:44,156 - __main__ - INFO - Initializing SchedulingChatbot with MCP...
2025-08-07 14:58:44,158 - __main__ - INFO - MCP client initialized with scheduler and mem0 servers
2025-08-07 14:58:44,159 - __main__ - INFO - Using model: gpt-4o
2025-08-07 14:58:46,402 - __main__ - INFO - Getting tools from MCP servers...
2025-08-07 14:58:46,843 - __main__ - ERROR - Failed to initialize MCP tools: unhandled errors in a TaskGroup (1 sub-exception)
  + Exception Group Traceback (most recent call last):
  |   File "/mnt/c/Users/ran/Desktop/new_canlah/schedular/core/langgraph_scheduler.py", line 82, in initialize
  |     self.tools = await self.client.get_tools()
  |                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  |   File "/home/ran/miniconda3/lib/python3.12/site-packages/langchain_mcp_adapters/client.py", line 142, in get_tools
  |     tools_list = await asyncio.gather(*load_mcp_tool_tasks)
  |                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  |   File "/home/ran/miniconda3/lib/python3.12/site-packages/langchain_mcp_adapters/tools.py", line 168, in load_mcp_tools
  |     async with create_session(connection) as tool_session:
  |   File "/home/ran/miniconda3/lib/python3.12/contextlib.py", line 231, in __aexit__
  |     await self.gen.athrow(value)
  |   File "/home/ran/miniconda3/lib/python3.12/site-packages/langchain_mcp_adapters/sessions.py", line 394, in create_session
  |     async with _create_stdio_session(**params) as session:
  |   File "/home/ran/miniconda3/lib/python3.12/contextlib.py", line 231, in __aexit__
  |     await self.gen.athrow(value)
  |   File "/home/ran/miniconda3/lib/python3.12/site-packages/langchain_mcp_adapters/sessions.py", line 220, in _create_stdio_session
  |     async with (
  |   File "/home/ran/miniconda3/lib/python3.12/contextlib.py", line 231, in __aexit__
  |     await self.gen.athrow(value)
  |   File "/home/ran/miniconda3/lib/python3.12/site-packages/mcp/client/stdio/__init__.py", line 180, in stdio_client
  |     async with (
  |   File "/home/ran/miniconda3/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 772, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Exception Group Traceback (most recent call last):
    |   File "/home/ran/miniconda3/lib/python3.12/site-packages/mcp/client/stdio/__init__.py", line 187, in stdio_client
    |     yield read_stream, write_stream
    |   File "/home/ran/miniconda3/lib/python3.12/site-packages/langchain_mcp_adapters/sessions.py", line 220, in _create_stdio_session
    |     async with (
    |   File "/home/ran/miniconda3/lib/python3.12/site-packages/mcp/shared/session.py", line 218, in __aexit__
    |     return await self._task_group.__aexit__(exc_type, exc_val, exc_tb)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/home/ran/miniconda3/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 772, in __aexit__
    |     raise BaseExceptionGroup(
    | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
    +-+---------------- 1 ----------------
      | Traceback (most recent call last):
      |   File "/home/ran/miniconda3/lib/python3.12/site-packages/langchain_mcp_adapters/sessions.py", line 224, in _create_stdio_session
      |     yield session
      |   File "/home/ran/miniconda3/lib/python3.12/site-packages/langchain_mcp_adapters/sessions.py", line 395, in create_session
      |     yield session
      |   File "/home/ran/miniconda3/lib/python3.12/site-packages/langchain_mcp_adapters/tools.py", line 169, in load_mcp_tools
      |     await tool_session.initialize()
      |   File "/home/ran/miniconda3/lib/python3.12/site-packages/mcp/client/session.py", line 151, in initialize
      |     result = await self.send_request(
      |              ^^^^^^^^^^^^^^^^^^^^^^^^
      |   File "/home/ran/miniconda3/lib/python3.12/site-packages/mcp/shared/session.py", line 286, in send_request
      |     raise McpError(response_or_error.error)
      | mcp.shared.exceptions.McpError: Connection closed
      +------------------------------------
2025-08-07 14:58:46,848 - __main__ - ERROR - Failed to run chatbot: unhandled errors in a TaskGroup (1 sub-exception)
2025-08-07 14:58:46,848 - asyncio - ERROR - unhandled exception during asyncio.run() shutdown
task: <Task finished name='Task-2' coro=<load_mcp_tools() done, defined at /home/ran/miniconda3/lib/python3.12/site-packages/langchain_mcp_adapters/tools.py:144> exception=UnboundLocalError("cannot access local variable 'tools' where it is not associated with a value")>
Traceback (most recent call last):
  File "/home/ran/miniconda3/lib/python3.12/site-packages/langchain_mcp_adapters/tools.py", line 175, in load_mcp_tools
    convert_mcp_tool_to_langchain_tool(session, tool, connection=connection) for tool in tools
                                                                                         ^^^^^
UnboundLocalError: cannot access local variable 'tools' where it is not associated with a value
